\geometry{top=14mm,bottom=14mm,left=12mm,right=12mm}


%% from review-pdfmaker
\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{\gtfamily\sffamily\bfseries\upshape \leftmark}
\chead{}
\rhead{\gtfamily\sffamily\bfseries\upshape \rightmark}
\fancyfoot{} % clear all header and footer fields
\fancyfoot[R]{\thepage}
\renewcommand{\sectionmark}[1]{\markright{\thesection~#1}{}}
\renewcommand{\chaptermark}[1]{\markboth{\prechaptername\ \thechapter\ \postchaptername~#1}{}}
\renewcommand{\headfont}{\gtfamily\sffamily\bfseries}

\fancypagestyle{plainhead}{%
\fancyhead{}
\fancyfoot{} % clear all header and footer fields
\fancyfoot[R]{\thepage}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}}

\renewcommand{\reviewtitlefont}[0]{%
  \usefont{T1}{phv}{b}{n}\gtfamily\ebseries}
\renewcommand{\reviewmainfont}[0]{%
  \usefont{T1}{phv}{m}{n}\mgfamily}

\urlstyle{same}

\usepackage{listings,jlisting}

\renewcommand{\lstlistingname}{\small \bf Code} 
\lstset{%
	frame=shadowbox,
	backgroundcolor={\color[gray]{.97}},
	stringstyle={\ttfamily \color[rgb]{0,0,1}},
	commentstyle={\color[rgb]{1,0,1}},
%	commentstyle={\itshape \color[gray]{0.6}},
	identifierstyle={\ttfamily},
%	identifierstyle={\bfseries},
	keywordstyle={\ttfamily \color[rgb]{0,0.5,0}},
%	keywordstyle={\bfseries \color[gray]{0.4}},
	basicstyle={\ttfamily},
%	basicstyle={\bfseries},
	breaklines=true,
%%%%	xleftmargin=4zw,
%%%%	xrightmargin=4zw,
	xleftmargin=0zw,
	xrightmargin=0zw,
	framerule=.2pt,
	columns=[l]{fullflexible},
	numbers=none,
%  stepnumber=5,
	numberstyle={\scriptsize},
	numbersep=1em,
	language={Ruby},
	lineskip=-0.5zw,
	morecomment={[s][{\color[cmyk]{1,0,0,0}}]{/**}{*/}},
	showstringspaces=false,
	tabsize = 5,
%	escapechar=\?,
}

%%Helveticaを使う
\renewcommand{\sfdefault}{phv}

%%全体のデフォルトを丸ゴシック+Helveticaに
\renewcommand{\kanjifamilydefault}{\mgdefault}
\renewcommand{\familydefault}{\sfdefault}

%% 見え方を修正
%\renewenvironment{reviewminicolumn}{%
%  \vspace{2zw}\begin{screen}}{%
%  \end{screen}\vspace{0zw}}


%% @<sub>を有効に
\usepackage{fixltx2e}

% appendixから「付録X」を削除
\renewcommand{\appendix}{\par
  %\setcounter{chapter}{0}%
  %\setcounter{section}{0}%
  \gdef\@chapapp{}%
  \gdef\@chappos{}%
  \gdef\thechapter{}}

%%色修正
\definecolor{shadecolorb}{gray}{0.5}

%%シングルクォート対応
\usepackage{upquote,textcomp}
\xspcode`'=0

\def\@makechapterhead#1{%
  \vspace*{2\Cvs}% 欧文は50pt
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \hfill{\huge\headfont \@chapapp\thechapter\@chappos}
        \par\nobreak
        \vskip \Cvs % 欧文は20pt
      \fi
    \fi
    \interlinepenalty\@M
    \hfill{\huge \headfont #1\par\nobreak}
    \vspace*{-2mm}%
    \rule{\textwidth}{0.1mm}
    \vskip 1.5\Cvs}} % 欧文は40pt


\makeatletter%%

\long\def\@makecaption#1#2{{\small
  \advance\leftskip .0628\linewidth
  \advance\rightskip .0628\linewidth
  \vskip\abovecaptionskip
  \sbox\@tempboxa{\textgt{\textsf{#1}}\hskip1zw\relax \textgt{\textsf{#2}}}%
  \ifdim \wd\@tempboxa <\hsize \centering \fi
  \textgt{\textsf{#1}}\hskip1zw\relax \textgt{\textsf{#2}}\par
  \vskip\belowcaptionskip}}

\makeatother%% プリアンブルで定義する場合は必須(文字コードも)

\sloppy

%%目次と本文でページ番号を振り直しても表紙・中表紙ページと重複しないようRomanにしておく
\pagenumbering{Roman}

%\usepackage{nruby}

%%  \vbox to3cm{%
%%%    \hrule height.5mm depth\z@
%%    \vskip5mm
%%    \hfill
%%    {\Large\prechaptername}%
%%    {\Huge\thechapter}%
%%    {\Large\postchaptername}%
%%    \par\prevdepth-1000pt
%%    \vskip5mm
%%    {\Large\bfseries\hfill#1\par}%
%%    \vss
%%%    \hrule height.5mm depth\z@
%%  }%
%%}%


